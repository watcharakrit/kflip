{"version":3,"sources":["../../../../../src/scripts/kflip.js"],"names":[],"mappings":"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","file":"kflip.js","sourcesContent":["/*!\n * KFlip JavaScript Library v0.0.1\n *\n *\n * Copyright : Watcharakrit Phantu\n * Released under the MIT license\n * https://github.com/watcharakrit/kflip\n *\n * Date: Thu Jun 30 2016 15:24:29 GMT+0700 (ICT)\n */\n\n // test on Chrome Browser only.\n\nconst KFlip = function( $objContext ){\n\n  'use strict';\n\n  const $main = document.body.querySelector( $objContext );\n  let currentPage = 0;\n  let pageStack = [];\n\n  // goto\n  this.gotoPage = function( pageName, animationName ) {\n    newPage( pageName, animationName ).then( function( $newPage ) {\n\n      $newPage.removeClassAnimation( animationName );\n\n      if ( pageStack.length > 0 ) {\n        var $currentPage = $main.querySelector( '#page-' + pageStack[currentPage-1].pageId );\n        $currentPage.addClassAnimation( animationName + '-out' ).then( function( $outpage ) {\n          $outpage.remove();\n        });\n      }\n\n      // keep history\n      pageStack.push({\n        pageId: pageName,\n        animationName: animationName\n      });\n      currentPage++;\n    });\n  }\n\n  // back\n  this.prevPage = function() {\n    if ( pageStack.length > 1 ) {\n      var animationName = pageStack[pageStack.length-1].animationName;\n      var outPage = pageStack[pageStack.length-1].pageId;\n      pageStack.pop();\n      var prevPageDate = pageStack[pageStack.length-1];\n      var pageName = prevPageDate.pageId;\n      newPage( pageName, animationName + '-out' ).then( function( $newPage ) {\n\n        $newPage.removeClassAnimation( animationName + '-out' );\n\n        var $outPage = $main.querySelector( '#page-' + outPage );\n        $outPage.addClassAnimation( animationName ).then( function( $outpage ){\n          $outpage.remove();\n        });\n\n        currentPage--;\n      });\n    } else {\n      console.log( 'first page is not have to back!!!');\n    }\n  }\n\n  // rendering new page\n  var newPage = function( pageName, animationName ) {\n    return new Promise( function( resolve, reject ) {\n\n      console.log(pageName, animationName);\n      var node = document.createTextNode( pageName );\n      var page = document.createElement('div');\n      page.id = 'page-' + pageName;\n\n      if ( pageStack.length > 0 ) {\n        page.classList.add('animationing', animationName);\n      }\n      page.appendChild(node);\n\n      // appearance page\n      $main.appendChild(page);\n      setTimeout(function(){\n        resolve( page );\n      }, 100);\n    });\n  };\n\n  Object.prototype.removeClassAnimation = function( animationName ){\n    var self = this;\n    return new Promise( function( resolve ) {\n      self.addEventListener( 'webkitTransitionEnd', function() {\n        self.classList.remove('animationing');\n        resolve(self);\n      });\n\n      self.classList.remove( animationName );\n    });\n  };\n\n  Object.prototype.addClassAnimation = function( animationName ){\n    var self = this;\n    return new Promise( function( resolve ) {\n      self.addEventListener( 'webkitTransitionEnd', function() {\n        self.classList.remove('animationing');\n        resolve(self);\n      });\n\n      self.classList.add( animationName );\n    });\n  };\n}\n\n\nconsole.log('test');"]}